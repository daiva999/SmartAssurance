<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function($rootScope,$scope) {
/* widget controller */
var c = this;
c.getData=[]
var productDetails=[]
$rootScope.$on('productCompare',function(event,data1)
{
productDetails=[]
c.getData=data1;
c.getData.forEach(function(product){
	var obj={
		"prod_id":product.productId,
		"premium":product.premiumAmount,
	}
	productDetails.push(obj);
});

});
	$scope.compareProducts=function (){
			c.server.get({"value":"true","action":productDetails});
	}

};
]]></client_script>
        <controller_as>c</controller_as>
        <css>        * {&#13;
            margin: 0;&#13;
            padding: 0;&#13;
            font-family: 'Inter',sans-serif;&#13;
        }&#13;
		.body{&#13;
      width:100%&#13;
			position:absolute;&#13;
			top:0;&#13;
			left:0;&#13;
		}&#13;
        .comparisionPage {&#13;
&#13;
            background: #f4f5f7;&#13;
            width: 100%;&#13;
            //height: 100vh;&#13;
          	&#13;
            display: flex;&#13;
            align-items: center;&#13;
            flex-direction: column;&#13;
			//padding-top:40px;&#13;
			&#13;
        }&#13;
&#13;
        .title {&#13;
            margin: 30px;&#13;
            font-size: 24px;&#13;
            font-weight: 600;&#13;
			      color:#253858;&#13;
        }&#13;
&#13;
        .comparison-table {&#13;
            display: flex;&#13;
            flex-direction: column;&#13;
            border: 1px solid #ccc;&#13;
            width: 100%;&#13;
            margin: 0 auto;&#13;
            border-radius: 10px;&#13;
            background: #f5f5f5;&#13;
            box-shadow: 0px 0px 10px rgb(172, 172, 172);&#13;
            color: #253858;&#13;
			      padding: 0 10px;&#13;
        }&#13;
&#13;
        .row {&#13;
            display: flex;&#13;
            justify-content: space-between;&#13;
            padding: 10px 10px;&#13;
        }&#13;
&#13;
		&#13;
        .row:nth-child(even) {&#13;
            background: #dfdfdf;&#13;
        } &#13;
&#13;
        .key {&#13;
            flex-basis: 30%;&#13;
            font-weight: bold;&#13;
            padding: 5px 0;&#13;
        }&#13;
&#13;
        .product-a,&#13;
        .product-b {&#13;
            flex-basis: 35%;&#13;
            padding: 5px 10px;&#13;
        }&#13;
&#13;
        .key,&#13;
        .product-a {&#13;
            border-right: 1px solid #d0d0d0;&#13;
        }&#13;
&#13;
        img {&#13;
            height: 100px;&#13;
            width:100px;&#13;
        } &#13;
&#13;
        .productTitle {&#13;
            text-align: center;&#13;
            font-size: 18px;&#13;
            font-weight: 600;&#13;
            color: #686868;&#13;
            margin-top: 20px;&#13;
            margin-bottom: 10px;&#13;
            margin-left:15px;&#13;
        }&#13;
&#13;
        .btn {&#13;
            background: #2673e7;&#13;
            padding: 10px 60px;&#13;
            border-radius: 8px;&#13;
            border: none;&#13;
            color: #fff;&#13;
            font-size: 16px;&#13;
            font-weight: 600;&#13;
        }&#13;
&#13;
        .productLogo {&#13;
            background: #fff;&#13;
            height: 60px;&#13;
            width: 100px;&#13;
            display: flex;&#13;
            justify-content: center;&#13;
            align-items: center;&#13;
            border-radius: 5px;&#13;
            border: 1px solid #dfe1e6;&#13;
        }&#13;
&#13;
        .tableHeading {&#13;
            font-size: 24px;&#13;
            border-right: 1px solid #d0d0d0;&#13;
            font-weight: 600;&#13;
            color: #686868;&#13;
            flex-basis: 30%;&#13;
        }&#13;
&#13;
        .wrong {&#13;
            color: rgb(135, 0, 0);&#13;
            width: 30px;&#13;
            height: 30px;&#13;
        }&#13;
		&#13;
		.breadcrum {&#13;
			position: absolute;&#13;
			font-size: 14px;&#13;
			font-style: normal;&#13;
			font-weight: 400;&#13;
			margin-top: 100px;&#13;
			margin-left: 3%;&#13;
		}&#13;
		&#13;
		.breadcrumbContent{&#13;
			color:black;&#13;
            text-decoration: none;&#13;
		}&#13;
		&#13;
		.breadcrumbContent:hover{&#13;
			color:#253858;&#13;
            text-decoration: none;&#13;
		}&#13;
.product-a, .product-b{&#13;
  display:inline-flex;&#13;
}&#13;
.modal{&#13;
  visbility:hidden;&#13;
      outline: none !important;&#13;
&#13;
}&#13;
.compareButton{&#13;
  background:#6eb8b1&#13;
  min-width: 3.5rem;&#13;
  margin: 61px;&#13;
    height: 46px;&#13;
    padding: 9px;&#13;
  text-align: center;&#13;
  background-color:#6eb8b1;&#13;
  color: white;&#13;
  font-size: 1.5rem;&#13;
  font-weight: 500;&#13;
  border: none;&#13;
  border-radius: 0.5rem;&#13;
  visibility:hidden;&#13;
}&#13;
.selected-item{&#13;
  text-transform:capitalize;&#13;
}&#13;
.card-image img{&#13;
  width:120px;&#13;
  height:120px;&#13;
}&#13;
#productsSelected{&#13;
    padding-left: 21%;&#13;
    margin: 30px;&#13;
  	width: 100rem;&#13;
    height: 10rem;&#13;
    padding: -1px 1rem;&#13;
    display: flex;&#13;
    align-items: center;&#13;
    gap: 3rem;&#13;
}&#13;
&#13;
&#13;
</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id/>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>Copy of productComparePopUp</name>
        <option_schema/>
        <public>true</public>
        <roles/>
        <script><![CDATA[(function() {
	var user= gs.getUserID();
	var prd1="";
	var prd2="";
	data.premiuim=[]
	//var prd1 = $sp.getParameter('product_id1');
	//var prd2 = $sp.getParameter('product_id2');
if(input && input.value=="true") {
	gs.addErrorMessage("hii")
	prd1=input[0].prod_id;
	prd2=input[1].prod_id;
	data.premiuim.push(input[0].premium)
	data.premiuim.push(input[1].premium)

}
	data.productDetailsdata = [];

	var productDetails =new GlideRecord('x_rptp_insureme_insurance_products');
	productDetails.addQuery('sys_id', 'IN', [prd1,prd2] );
	productDetails.query();
	while(productDetails.next()){
		var jObj={
			"name":productDetails.getValue("prod_name"),
			"image":findImage(),
			"sum":productDetails.getValue('sum')
		}
		data.productDetailsdata.push(jObj);
	}
	function findImage() {
		var Iname = 'futureinsurance.png';
		var gr = new GlideRecord("db_image");
		gr.get(Iname);
		return gr.getDisplayValue('image');
	}

	var benefitsArray=[];
	var arr=[];
	var obj1={}
	var gr=new GlideRecord("x_rptp_insureme_insurance_products_benefits");
	gr.addQuery('u_prod_type', prd1);
		//gr.addQuery('u_prod_type', prd2);
	gr.setLimit(5);
	gr.orderBy('name');
	gr.query();
	 arr=[];
	while(gr.next()){
		 obj1={
			"name": gr.getValue('name'),
			"value": gr.getValue('value')
		}
		arr.push(obj1);
	}
	benefitsArray.push(arr);
	gr=new GlideRecord("x_rptp_insureme_insurance_products_benefits");
	gr.addQuery('u_prod_type', prd2);
		//gr.addQuery('u_prod_type', prd2);
	gr.setLimit(5);
	gr.orderBy('name');
	gr.query();
	 arr=[];
	while(gr.next()){
		 obj1={
			"name": gr.getValue('name'),
			"value": gr.getValue('value')
		}
		arr.push(obj1);
	}
	benefitsArray.push(arr);

	data.rows=[];
	var requiredDetailsToCompare=["Automatic extension for 7 days","Emergency Sickness Dental Relief","Loss of Passport","Trip Cancellation"]
	for(var arr1=0;arr1<benefitsArray[0].length;arr1++){
		if(benefitsArray[0][arr1].name==benefitsArray[1][arr1].name){
			var tableData={
				"features":benefitsArray[0][arr1].name,
				"product1":benefitsArray[0][arr1].value,
				"product2":benefitsArray[1][arr1].value
			}
			data.rows.push(tableData);
		}
	}


	/*	data.features=[];
	benefitsArray.forEach(function (items){
		var str=""
		items.forEach(function(elements,i){
			if(elements.value!="Not Applicable"){
				str=str+elements.name;
				if(i!=items.length-1){
				str=str+",";
				}
			}

		})
		gs.addErrorMessage(str)
		data.features.push(str);
	})*/
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>kumar.raja</sys_created_by>
        <sys_created_on>2024-02-09 16:48:38</sys_created_on>
        <sys_id>8879fffc93580e10acdc3f484dba105b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Copy of productComparePopUp</sys_name>
        <sys_package display_value="SmartAssurance" source="x_rptp_insureme">87b3cc0b4775711055784a02516d4350</sys_package>
        <sys_policy/>
        <sys_scope display_value="SmartAssurance">87b3cc0b4775711055784a02516d4350</sys_scope>
        <sys_update_name>sp_widget_8879fffc93580e10acdc3f484dba105b</sys_update_name>
        <sys_updated_by>kumar.raja</sys_updated_by>
        <sys_updated_on>2024-02-09 16:48:38</sys_updated_on>
        <template><![CDATA[<div>

    <div class="productsSelectedContainer">
        <div id="productsSelected" ng-controller="c" style="display: inline-flex;">
            <div class="card" style="padding:35px;" ng-repeat="product in c.getData">
                <div class="card-image">
                    <img ng-src="{{product.image}}" alt="{{product.productCode}}">
                    <span class='selected-item'>{{product.productCode }}</span>
                </div>
            </div>
            <button class="compareButton btn btn-primary" ng-click="compareProducts()"
                style='padding: 10px;background:#0065ff;' data-toggle="modal"
                data-target="#myPopupToGetInputData">Compare</button>

        </div>
    </div>


    <!--<button type="button" class="btn btn-primary" ng-click="c.showModalPopup()"  data-toggle="modal" 
                  data-target="#myPopupToGetInputData" style="margin-top:50px;">Compare</button> -->

    <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
        aria-hidden="true" id="myPopupToGetInputData" style="margin-left:250px; margin-top:50px;">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="body">
                    <div class="comparisionPage">
                        <div class="title">Comparison Summary</div>
                        <div class="comparison-table">
                            <div class="row">
                                <div class="tableHeading">Features</div>
                                <div class="product-a">
                                    <div class="productLogo"><img src="{{data.productDetailsdata[0].image}}"
                                            alt="{{data.productDetailsdata[0].name}}"></div>
                                    <div class="productTitle">{{data.productDetailsdata[0].name}}</div>
                                </div>
                                <div class="product-b">
                                    <div class="productLogo"><img src="{{data.productDetailsdata[1].image}}"
                                            alt="{{data.productDetailsdata[1].name}}"></div>
                                    <div class="productTitle">{{data.productDetailsdata[1].name}} </div>
                                </div>
                            </div>
                            <div class="row" ng-repeat="row in data.rows">
                                <div class="key">{{row.features}}</div>
                                <div class="product-a">{{row.product1}}</div>
                                <div class="product-b">{{row.product2}}</div>
                            </div>
                            <div class="row">
                                <div class="key">Sum Insured</div>
                                <div class="product-a">{{data.productDetailsdata[0].sum}}</div>
                                <div class="product-b">{{data.productDetailsdata[1].sum}}</div>
                            </div>
                            <!--
                  <div class="row">
                      <div class="key">Policy Amount</div>
                      <div class="product-a">1Year@15L</div>
                      <div class="product-b">1Year@15L</div>
                  </div>
                  <div class="row">
                      <div class="key">Policy Duration</div>
                      <div class="product-a">11 months</div>
                      <div class="product-b">60 months</div>
                  </div>-->
                        </div>
                       	<div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal" style="margin:10px;padding:8px 40px">OK</button>
            </div>
                    </div>
								
                </div>
            </div>
        </div>
    </div>
</div>]]></template>
    </sp_widget>
</record_update>
